<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="<%= BASE_URL %>favicon.ico">
  <link rel="stylesheet" href="indexStyles.css">
  <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@300;400;700&display=swap" rel="stylesheet">
  <title><%= htmlWebpackPlugin.options.title %></title>
</head>
<body >
  <header class="header">
    <div class="header-top">
      <div class="header-logo">
        <a href="/"><img src="/logotipo-sinfondo.png" alt="WallaShop" class="logo"></a>
      </div>
      <div class="header-search">
        <input type="text" placeholder="Busca productos...">
      </div>
      <div class="header-buttons">
        <button id="register-btn" class="btn">Registrarse</button>
        <button id="login-btn" class="btn">Iniciar Sesión</button>
        <div class="bar-wrapper" id="bar-wrapper">
          <div class="bar"></div>
          <div class="bar"></div>
          <div class="bar"></div>
        </div>
        <div class="sidebar-menu" id="sidebar-menu">
          <ul>
            <li><a href="../src/views/ProfilePage.vue">Ver Perfil</a></li>
            <li><a href="../src/views/EditProfile.vue">Editar Perfil</a></li>
            <li><a href="#" id="logout-btn">Cerrar Sesión</a></li>
          </ul>
        </div>
      </div>
    </div>
  </header>
  <noscript>
    <strong>Lo sentimos, pero <%= htmlWebpackPlugin.options.title %> no funciona correctamente sin JavaScript habilitado. Por favor, actívalo para continuar.</strong>
  </noscript>
  <div id="app"></div>

  <footer class="footer">
    <div class="footer-content">
      <div class="footer-social">
        <p>WallaShop</p>
        <div class="social-icons">
          <a href="#"><img src="instagram.png" alt="Instagram"></a>
          <a href="#"><img src="facebook.png" alt="Facebook"></a>
          <a href="#"><img src="twitter.png" alt="Twitter"></a>
          <a href="#"><img src="youtube.png" alt="YouTube"></a>
        </div>
      </div>
      <div class="footer-logo">
        <img src="/logotipo-sinfondo.png" alt="WallaShop" class="logo">
      </div>
    </div>
    <div class="footer-bottom">
      <p>&copy; 2024 Wallashop. All rights reserved.</p>
    </div>
  </footer>

  <script>
    let loginButton = document.getElementById('login-btn');
    let registerButton = document.getElementById('register-btn');
    let barWrapper = document.getElementById("bar-wrapper");
    let bars = document.getElementsByClassName("bar");
    let sidebarMenu = document.getElementById("sidebar-menu");
    let menuItems = document.querySelectorAll(".sidebar-menu li");
    let logoutButton = document.getElementById('logout-btn');
    let click = false;

    loginButton.addEventListener('click', function () {
      window.location.href = '/login.html';
    });

    registerButton.addEventListener('click', function () {
      window.location.href = '/register.html';
    });

    logoutButton.addEventListener('click', function () {
      localStorage.removeItem('user');
      window.location.href = '/';
    });

    let userLocalStorage = localStorage.getItem('user');

    if (userLocalStorage) {
      loginButton.style.display = 'none';
      registerButton.style.display = 'none';
    } else {
      loginButton.style.display = 'block';
      registerButton.style.display = 'block';
    }

    function timeOutMenuLinks(i, enter) {
      if (enter) {
        setTimeout(function() {
          menuItems[i].className += " link-in";
        }, 100 * i);
      } else {
        setTimeout(function() {
          menuItems[i].className = "";
        }, 100 * i);
      }
    }

    barWrapper.onclick = function() {
      click = !click;

      if (click) {
        barWrapper.className += " is-close menu-open";
        bars[0].className += " close";
        bars[bars.length - 1].className += " close";
        sidebarMenu.className += " menu-open";
        for (let i = 0; i < menuItems.length; i++) {
          timeOutMenuLinks(i, true);
        }
      } else {
        barWrapper.className = "bar-wrapper";
        bars[0].className = "bar";
        bars[bars.length - 1].className = "bar";
        setTimeout(function(){
          sidebarMenu.className = "sidebar-menu";
        }, 300);
        for (let i = 0; i < menuItems.length; i++) {
          timeOutMenuLinks(i, false);
        }
      }
    };

    window.onclick = function(event) {
      if (!event.target.matches('.bar-wrapper') && !event.target.matches('.bar') && !event.target.matches('.sidebar-menu') && !event.target.matches('.sidebar-menu *')) {
        if (sidebarMenu.classList.contains('menu-open')) {
          sidebarMenu.classList.remove('menu-open');
          barWrapper.className = "bar-wrapper";
          bars[0].className = "bar";
          bars[bars.length - 1].className = "bar";
          for (let i = 0; i < menuItems.length; i++) {
            timeOutMenuLinks(i, false);
          }
        }
      }
    };
  </script>
</body>
</html>
